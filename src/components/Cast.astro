---
const cast = [
  {
    title: "Gustavo Petro",
    thumbnail: "/house-of-narino/images/cast/img1.png",
    description: "Conoce más en: Capítulo 1",
    youtubeId: "vT2s7p0XwHs",
  },
  {
    title: "Olmedo López",
    thumbnail: "/house-of-narino/images/cast/img2.png",
    description: "Conoce más en: Capítulo 1",
    youtubeId: "BrcJrgtZwJc",
  },
  {
    title: "Sneyder Pinilla",
    thumbnail: "/house-of-narino/images/cast/img3.png",
    description: "Conoce más en: Capítulo 1",
    youtubeId: "irU2eNrteso",
  },
  {
    title: "Carlos Andrés Trujillo",
    thumbnail: "/house-of-narino/images/cast/img4.png",
    description: "Conoce más en: Capítulo 1",
    youtubeId: "9x1cXzIbcyg",
  },
  {
    title: "Julio Elías Chagüi",
    thumbnail: "/house-of-narino/images/cast/img5.png",
    description: "Conoce más en: Capítulo 2",
    youtubeId: "HTpKuSzozeY",
  },
  {
    title: "Julián Bedoya",
    thumbnail: "/house-of-narino/images/cast/img6.png",
    description: "Conoce más en: Capítulo 1",
    youtubeId: "iyl3N2SoLJk",
  },
  {
    title: "Andrés Calle Aguas",
    thumbnail: "/house-of-narino/images/cast/img7.png",
    description: "Conoce más en: Capítulo 2",
    youtubeId: "XRzmfpBbkcE",
  },
  {
    title: "UNGRD",
    thumbnail: "/house-of-narino/images/cast/img8.png",
    description: "Conoce más en: Capítulo 3",
    youtubeId: "WdB3IKOaMH4",
  },
];
---

<section class="px-6 md:px-12 lg:px-20 py-10 text-white">
  <h2 class="text-2xl font-semibold mb-6">Cast</h2>
  <p class="text-sm mb-6">
    Conoce a los personajes principales en la voz del diablo, un personaje
    satírico que describe a quienes considera sus clientes.
  </p>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    {
      cast.map((item) => (
        <div
          class="bg-[#2F2F2F] rounded-md overflow-hidden transition-transform hover:scale-[1.02]"
          data-youtubeid={item.youtubeId}
        >
          <div class="relative aspect-[1/1]">
            <img
              src={item.thumbnail}
              alt={item.title}
              class="absolute inset-0 w-full h-full object-cover"
            />
            {item.youtubeId && (
              <div class="absolute inset-0 flex items-center justify-center">
                <button
                  class="play-btn absolute inset-0 flex items-center justify-center cursor-pointer"
                  data-youtubeid={item.youtubeId}
                  aria-label="Reproducir video"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-[46px] h-[46px]"
                    viewBox="0 0 46 46"
                  >
                    <circle
                      cx="23"
                      cy="23"
                      r="22"
                      fill="#181818"
                      fill-opacity="0.5"
                      stroke="white"
                      stroke-width="1"
                    />
                    <path d="M16 13v20l16-10z" fill="white" />
                  </svg>
                </button>
              </div>
            )}
          </div>

          <div class="p-4 flex flex-col gap-3 text-white text-sm">
            <span>{item.title}</span>
            <a
              href="#episodios"
              class="text-[#D2D2D2] max-w-[80%] hover:text-white hover:underline transition-colors"
            >
              {item.description}
            </a>
          </div>
        </div>
      ))
    }
  </div>

  <div
    id="videoModal"
    class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden"
  >
    <div
      class="bg-[#242424] max-w-2xl w-[90vw] rounded-lg p-4 text-white shadow-lg border border-white/30 relative"
    >
      <div class="w-full aspect-video mb-4">
        <iframe
          id="videoIframe"
          class="w-full h-full rounded"
          src=""
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      </div>
      <button
        id="closeModalBtn"
        class="block mx-auto px-6 py-2 rounded bg-white text-black font-semibold hover:bg-gray-200 transition cursor-pointer"
        type="button"
      >
        Cerrar
      </button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("videoModal");
      const iframe = document.getElementById("videoIframe");
      const closeBtn = document.getElementById("closeModalBtn");

      document.querySelectorAll(".play-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const youtubeId = btn.getAttribute("data-youtubeid");
          if (youtubeId) {
            iframe.src = `https://www.youtube.com/embed/${youtubeId}?autoplay=1&modestbranding=1&rel=0`;
            modal.classList.remove("hidden");
          }
        });
      });

      closeBtn.addEventListener("click", () => {
        modal.classList.add("hidden");
        iframe.src = "";
      });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.add("hidden");
          iframe.src = "";
        }
      });
    });
  </script>
</section>
