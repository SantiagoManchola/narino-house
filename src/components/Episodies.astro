---
const episodes = [
  {
    id: 1,
    title: "Capítulo 1",
    description:
      "Clientelismo, pago de favores, cuotas políticas Gobierno Petro (UNGRD) La Paz Total.",
    duration: "56 min",
    thumbnail: "/images/episodies/ep1.png",
  },
  {
    id: 2,
    title: "Capítulo 2",
    description: "El Clan Torres es el nuevo Clan Char.",
    duration: "48 min",
    thumbnail: "/images/episodies/ep2.png",
  },
  {
    id: 3,
    title: "Capítulo 3",
    description:
      "Las mafias detrás del Gobierno Petro (Bedoya) (Esmeralderos Boyacá)",
    duration: "55 min",
    thumbnail: "/images/episodies/ep3.png",
  },
];
---

<section class="px-4 md:px-12 lg:px-20 py-6 text-white">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-semibold">Episodios</h2>

        <select
        class="bg-transparent border border-white/80 px-5 py-3 rounded text-sm"
        disabled
        >
        <option>Temporada 1</option>
        </select>
    </div>

  <div class="flex items-center justify-between text-sm mb-2">
    <div class="flex items-center gap-3">
      <span class="font-semibold">Temporada 1:</span>
      <span class="border border-white px-1.5 py-0.5 rounded text-xs">16+</span>
      <span class="text-white/80">
        violencia, sexo, lenguaje inapropiado
      </span>
    </div>
  </div>

  <div id="episode-list">
    {episodes.map((ep) => (
      <div
        class="episode-item flex items-start gap-4 px-12 py-4 rounded-md transition-colors cursor-pointer hover:bg-white/5 md:h-[130px] border-b border-[#333]"
        data-id={ep.id}
      >
        <div class="w-6 text-lg text-white/60 self-center flex justify-center">{ep.id}</div>

        <div class="flex-1 flex flex-col sm:flex-row gap-4 h-full">
          <div class="relative w-full sm:w-[132px] aspect-video shrink-0 rounded overflow-hidden self-center">
            <img
              src={ep.thumbnail}
              alt={ep.title}
              class="w-full object-cover"
            />
            <div class="absolute inset-0 flex items-center justify-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 text-white"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
            </div>
          </div>

          <div class="flex-1 py-3 overflow-auto">
            <div class="flex justify-between items-start">
              <h3 class="text-white font-semibold">{ep.title}</h3>
              <span class="text-white/70 text-sm">{ep.duration}</span>
            </div>
            <p class="text-white/80 text-sm mt-2 w-[85%]">{ep.description}</p>
          </div>
        </div>
      </div>
    ))}
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const items = document.querySelectorAll(".episode-item");

    // @ts-ignore
    function setActiveEpisode(activeEl) {
      items.forEach((el) => {
        el.classList.remove("bg-white/10");
        el.classList.add("border-b");
      });

      activeEl.classList.remove("border-b");
      activeEl.classList.add("bg-white/10");
    }

    items.forEach((el, idx) => {
      el.addEventListener("click", () => {
        setActiveEpisode(el);
      });
    });

    if (items.length) {
      setActiveEpisode(items[0]);
    }
  });
</script>
